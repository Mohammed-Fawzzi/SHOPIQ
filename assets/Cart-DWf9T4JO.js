import{r,j as e,a as F}from"./index-BAlKlOWj.js";import{u as L,a as l,g as O,r as _,c as A,d as H,e as R}from"./UseCart-DfYhWEuc.js";import{H as T}from"./Helmet-BXMTIC_i.js";import"./axios-C8DqakIB.js";import"./useMutation-CX-HYC51.js";import"./utils-Dji2qSVF.js";import"./useQuery-USuf5USd.js";const b="/SHOPIQ/assets/empty-cart-Bey6B1R7.webp";function q(){var d,i,o,c,m;let{data:a,isLoading:j,isError:g}=L("LoggedProduct",O);console.log(a);let{mutate:N}=l(_),{mutate:f}=l(A),{mutate:n}=l(H),{mutate:y,data:s}=l(R);const[C,v]=r.useState(""),[w,I]=r.useState(""),[P,S]=r.useState("");function E(t){var x,h,u,p;t.preventDefault();let k={details:C,phone:w,city:P};y({productId:(h=(x=a==null?void 0:a.data)==null?void 0:x.data)==null?void 0:h._id,shippingAddress:k}),((u=s==null?void 0:s.data)==null?void 0:u.status)==="success"&&(window.location.href=(p=s==null?void 0:s.data)==null?void 0:p.session.url)}return j?e.jsx(F,{}):g?e.jsxs("div",{className:"text-center my-4",children:[e.jsx("h4",{children:"Cart is empty"}),e.jsx("img",{src:b,height:400,alt:"empty-cart"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(T,{children:[e.jsx("meta",{charSet:"utf-8"}),e.jsx("title",{children:"Cart"})]}),e.jsx("div",{className:"container my-5 pt-5",children:(d=a==null?void 0:a.data)!=null&&d.numOfCartItems?e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"text-main pt-2 fw-bold",children:"Cart Shopping"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-main fw-bold mt-3",children:[e.jsx("span",{className:"text-dark",children:"Cart Items :"})," ",(i=a==null?void 0:a.data)==null?void 0:i.numOfCartItems]}),e.jsxs("p",{className:"text-main fw-bold mb-3",children:[e.jsx("span",{className:"text-dark",children:"Total Cart Price :"})," ",(o=a==null?void 0:a.data)==null?void 0:o.data.totalCartPrice," EGP"]}),e.jsxs("div",{className:"d-flex justify-content-between border-bottom pb-3",children:[e.jsx("button",{className:"btn btn-outline-danger",onClick:()=>{f()},children:"Clear Cart"}),e.jsx("button",{className:"btn btn-outline-primary","data-bs-toggle":"modal","data-bs-target":"#modalId",children:"Check Out"})]})]}),(m=(c=a==null?void 0:a.data)==null?void 0:c.data)==null?void 0:m.products.map(t=>e.jsxs("div",{className:"row py-4 border-bottom",children:[e.jsx("div",{className:"col-md-1",children:e.jsx("img",{src:t.product.imageCover,alt:t.title,className:"w-100"})}),e.jsxs("div",{className:"col-md-11",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"fw-bold",children:t.product.title.split(" ").slice(0,4).join(" ")}),e.jsxs("h6",{className:"text-main fw-bold",children:["Price : ",t.price,"EGP"]})]}),e.jsxs("div",{children:[e.jsx("button",{className:"btn brd-btn p-2",onClick:()=>{n({productId:t.product._id,count:t.count+1})},children:"+"}),e.jsx("span",{className:"mx-3",children:t.count}),e.jsxs("button",{className:"btn brd-btn p-2",onClick:()=>{t.count>1&&n({productId:t.product._id,count:t.count-1})},children:[" ","-"," "]})]})]}),e.jsxs("span",{className:" cursor-pointer fw-bold",onClick:()=>{N(t.product._id)},children:[e.jsx("i",{className:"text-danger fas fa-trash-can"})," Remove"]})]})]},t.product.id)),e.jsx("div",{className:"modal fade",id:"modalId",tabIndex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false",role:"dialog","aria-labelledby":"modalTitleId","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog modal-dialog-scrollable modal-dialog-centered modal-lg",role:"document",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title cart-heart-modal text-main fw-bold",id:"modalTitleId",children:"Shipping Address"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("form",{onSubmit:E,children:[e.jsx("label",{htmlFor:"name",className:"mb-1",children:"Name :"}),e.jsx("input",{type:"text",id:"name",placeholder:"Enter your name",onChange:t=>v(t.target.value),className:"form-control rounded-0"}),e.jsx("label",{htmlFor:"phone",className:"mt-2 mb-1",children:"Phone :"}),e.jsx("input",{type:"text",id:"phone",placeholder:"Enter you phone number",onChange:t=>I(t.target.value),className:"form-control rounded-0"}),e.jsx("label",{htmlFor:"city",className:"mt-2 mb-1",children:"City :"}),e.jsx("input",{type:"text",id:"city",placeholder:"Enter your city",onChange:t=>S(t.target.value),className:"form-control rounded-0"}),e.jsx("button",{className:"btn btn-outline-primary mt-3 px-5 py-1 rounded-0",type:"submit",children:"Send"})]})})]})})})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-main pt-3 text-start fw-bold",children:"Your cart is empty"}),e.jsx("div",{className:"d-flex flex-column align-items-center",children:e.jsx("img",{src:b,alt:"empty-cart",className:"w-50",loading:"lazy"})})]})})]})}export{q as default};
