import{u as c,r as u,j as e,f as h,_ as t}from"./index-BAlKlOWj.js";import{a as p}from"./axios-C8DqakIB.js";import{c as w,a as o,u as x}from"./index.esm-Bq2wrOFH.js";import{H as b}from"./Helmet-BXMTIC_i.js";import{u as f}from"./useMutation-CX-HYC51.js";import"./utils-Dji2qSVF.js";function E(){const l=c(),[n,s]=u.useState(!1);function i(r){return s(!0),p.put("https://ecommerce.routemisr.com/api/v1/auth/resetPassword",r)}let{mutate:d}=f(i,{onSuccess:()=>{t.success("Success , login and enjoy"),l("/Login"),s(!1)},onError:()=>{t.error("Error , please try again"),s(!1)}});const m=w({email:o().email().required("Email is required"),newPassword:o().matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$/,"Password must be at least 8 characters long, contain at least one letter, one number and one special character.").required("Password is required")});let a=x({initialValues:{email:"",newPassword:""},validationSchema:m,onSubmit:r=>{d(r)}});return e.jsxs(e.Fragment,{children:[e.jsxs(b,{children:[e.jsx("meta",{charSet:"utf-8"}),e.jsx("title",{children:"Reset Password"})]}),e.jsxs("div",{className:"container my-5 py-5",children:[e.jsx("h3",{className:"mt-3 text-main fw-bold",children:"Reset Password :"}),e.jsxs("form",{onSubmit:a.handleSubmit,className:"py-3",children:[e.jsx("label",{className:"py-2",htmlFor:"resetCode",children:"Email :"}),e.jsx("input",{className:"form-control mb-3",type:"text",placeholder:"Enter your email",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.email,name:"email"}),a.errors.email&&a.touched.email?e.jsx("div",{className:"alert alert-danger p-2 mt-3",children:a.errors.email}):"",e.jsx("label",{className:"pb-2",htmlFor:"resetCode",children:"New password :"}),e.jsx("input",{className:"w-100 mb-3 form-control",type:"password",placeholder:"Enter new password",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.newPassword,name:"newPassword"}),a.errors.newPassword&&a.touched.newPassword?e.jsx("div",{className:"alert alert-danger p-2",children:a.errors.newPassword}):"",e.jsxs("button",{disabled:!(a.isValid&&a.dirty),type:"submit",className:"btn bg-main text-white mt-3",children:[" ",n?e.jsx(h,{height:"25",width:"50",color:"#fff",ariaLabel:"bars-loading",visible:!0}):"Reset Password"]})]})]})]})}export{E as default};
